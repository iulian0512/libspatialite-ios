--- rttopo/src/rtout_x3d.c.orig	2022-04-28 15:17:34.000000000 +0300
+++ rttopo/src/rtout_x3d.c	2022-04-28 15:18:42.000000000 +0300
@@ -67,10 +67,10 @@
 /* https://trac.osgeo.org/postgis/ticket/3704 */
 
 /* Empty string for empties */
-  if( lwgeom_is_empty(geom) )
+  if( rtgeom_is_empty(ctx, geom) )
   {
     char *ret = NULL;
-    ret = lwalloc(1);
+    ret = rtalloc(ctx, 1);
     ret[0] = '\0';
     return ret;
   }
